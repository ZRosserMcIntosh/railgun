# Rail Gun - Production Environment Configuration
# ================================================
# 
# SECURITY WARNING: 
# - NEVER commit this file with real values
# - Copy to .env and configure with production secrets
# - Use a secrets manager (Vault, AWS SSM, etc.) for production
#
# This file contains PLACEHOLDER values only.
# All secrets must be rotated from development defaults.

# ===========================================
# Application
# ===========================================
NODE_ENV=production
PORT=3000

# ===========================================
# Database (PostgreSQL)
# ===========================================
# Use a managed database service with:
# - TLS/SSL required
# - Encryption at rest enabled
# - VPC/Private networking
# - Automatic backups enabled
#
DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/railgun?sslmode=require
# Individual variables (if not using connection string):
# DB_HOST=your-db-host.region.rds.amazonaws.com
# DB_PORT=5432
# DB_USERNAME=railgun_app
# DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
# DB_NAME=railgun
# DB_SSL=true

# ===========================================
# Redis
# ===========================================
# Use managed Redis with:
# - TLS enabled
# - AUTH password required
# - Private networking
#
REDIS_URL=rediss://USER:PASSWORD@HOST:6379
# Or individual variables:
# REDIS_HOST=your-redis.cache.amazonaws.com
# REDIS_PORT=6379
# REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
# REDIS_TLS=true

# ===========================================
# JWT Authentication
# ===========================================
# CRITICAL: Generate strong, unique secrets for production
# Use: openssl rand -base64 64
#
JWT_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_BASE64_64
JWT_EXPIRATION=15m
JWT_REFRESH_SECRET=CHANGE_ME_DIFFERENT_FROM_JWT_SECRET
JWT_REFRESH_EXPIRATION=7d

# CRITICAL: Separate secret for recovery code HMAC (must differ from JWT_SECRET)
# Use: openssl rand -base64 64
RECOVERY_CODE_SECRET=CHANGE_ME_MUST_BE_DIFFERENT_FROM_JWT_SECRET

# ===========================================
# Encryption Keys
# ===========================================
# Server-side encryption key for metadata (NOT for E2EE messages)
# Use: openssl rand -hex 32
#
ENCRYPTION_KEY=CHANGE_ME_64_HEX_CHARACTERS_HERE

# ===========================================
# CORS & Security
# ===========================================
# Comma-separated list of allowed origins
# Be restrictive - only include your actual client domains
#
CORS_ORIGINS=https://your-domain.com,https://app.your-domain.com

# Rate limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# ===========================================
# WebSocket
# ===========================================
WS_PORT=3001
WS_PATH=/ws

# ===========================================
# Logging
# ===========================================
# SECURITY: Never log message contents, tokens, or keys
LOG_LEVEL=info
LOG_FORMAT=json
# Set to 'true' to redact sensitive fields automatically
LOG_REDACT_SENSITIVE=true

# ===========================================
# File Storage (Optional)
# ===========================================
# For encrypted file attachments
# S3_BUCKET=railgun-attachments-prod
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=CHANGE_ME
# S3_SECRET_ACCESS_KEY=CHANGE_ME

# ===========================================
# Email (Optional - for recovery codes, etc.)
# ===========================================
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=CHANGE_ME
# SMTP_FROM=noreply@your-domain.com

# ===========================================
# Monitoring (Optional)
# ===========================================
# SENTRY_DSN=https://xxx@sentry.io/xxx
# Ensure Sentry is configured to NOT capture message contents

# ===========================================
# Feature Flags
# ===========================================
ENABLE_REGISTRATION=true
ENABLE_COMMUNITIES=true
ENABLE_VOICE_CHANNELS=false
